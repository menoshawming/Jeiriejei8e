<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>

<html lang="ar" dir="rtl">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>دردشة MENO Shawming AI</title>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <style>

        * {

            box-sizing: border-box;

            font-family: 'Cairo', sans-serif;

        }

        body {

            background-color: #f0f2f5;

            margin: 0;

            display: flex;

            justify-content: center;

            align-items: center;

            height: 100vh;

        }

        #chat-window {

            width: 100%;

            max-width: 450px;

            height: 90vh;

            background: #fff;

            display: flex;

            flex-direction: column;

            border-radius: 20px;

            box-shadow: 0 15px 35px rgba(0,0,0,0.1);

            overflow: hidden;

            border: 1px solid #e0e0e0;

        }

        /* رأس الصفحة */

        .chat-header {

            background: linear-gradient(135deg, #1a73e8, #0d47a1);

            color: white;

            padding: 20px;

            text-align: center;

        }

        .chat-header h2 {

            margin: 0;

            font-size: 1.2rem;

        }

        .chat-header span {

            font-size: 0.8rem;

            opacity: 0.9;

        }

        /* منطقة الرسائل */

        #chat-messages {

            flex: 1;

            padding: 20px;

            overflow-y: auto;

            background-color: #f9f9f9;

            display: flex;

            flex-direction: column;

            gap: 15px;

        }

        .msg {

            max-width: 85%;

            padding: 12px 16px;

            border-radius: 15px;

            font-size: 0.95rem;

            line-height: 1.6;

            word-wrap: break-word;

        }

        .user-msg {

            align-self: flex-end;

            background-color: #1a73e8;

            color: white;

            border-bottom-left-radius: 2px;

        }

        .ai-msg {

            align-self: flex-start;

            background-color: #fff;

            color: #333;

            border: 1px solid #ddd;

            border-bottom-right-radius: 2px;

        }

        /* منطقة الإدخال */

        .chat-input-area {

            padding: 15px;

            background: #fff;

            border-top: 1px solid #eee;

            display: flex;

            gap: 10px;

        }

        #userInput {

            flex: 1;

            padding: 12px;

            border: 1px solid #ccc;

            border-radius: 25px;

            outline: none;

            transition: 0.3s;

        }

        #userInput:focus {

            border-color: #1a73e8;

        }

        button {

            background-color: #1a73e8;

            color: white;

            border: none;

            padding: 0 20px;

            border-radius: 25px;

            cursor: pointer;

            font-weight: bold;

            transition: 0.3s;

        }

        button:hover {

            background-color: #0d47a1;

        }

        button:disabled {

            background-color: #ccc;

        }

        /* مؤشر التحميل */

        .typing {

            font-style: italic;

            font-size: 0.8rem;

            color: #777;

            display: none;

            margin-bottom: 10px;

        }

    </style>

</head>

<body>

<div id="chat-window">

    <div class="chat-header">

        <h2>MENO Shawming AI</h2>

        <span>مساعدك الذكي في المتجر</span>

    </div>

    <div id="chat-messages">

        <div class="msg ai-msg">مرحباً بك في متجر MENO Shawming! أنا Gemini، مساعدك الذكي. كيف أساعدك اليوم؟</div>

    </div>

    <div id="typing-indicator" class="typing" style="padding: 0 20px;">Gemini يكتب الآن...</div>

    <div class="chat-input-area">

        <input type="text" id="userInput" placeholder="اسأل عن المنتجات أو الأسعار..." autocomplete="off">

        <button id="sendBtn">إرسال</button>

    </div>

</div>

<script>

    // بيانات الـ API الخاصة بك

    const API_KEY = "AIzaSyAXV3ITsM_8-J1zofrJOoz-Lv3eKuLq7_E"; 

    const URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

    const sendBtn = document.getElementById('sendBtn');

    const userInput = document.getElementById('userInput');

    const chatMessages = document.getElementById('chat-messages');

    const typingIndicator = document.getElementById('typing-indicator');

    async function handleChat() {

        const text = userInput.value.trim();

        if (!text) return;

        // 1. عرض رسالة المستخدم

        appendMessage(text, 'user-msg');

        userInput.value = '';

        

        // 2. إظهار مؤشر التحميل وتعطيل الزر

        typingIndicator.style.display = 'block';

        sendBtn.disabled = true;

        try {

            const response = await fetch(URL, {

                method: "POST",

                headers: { "Content-Type": "application/json" },

                body: JSON.stringify({

                    contents: [{

                        parts: [{ text: `أنت مساعد ذكي لمتجر "MENO Shawming". وظيفتك مساعدة الزبائن بلباقة. السؤال: ${text}` }]

                    }]

                })

            });

            const data = await response.json();

            if (data.error) {

                throw new Error(data.error.message);

            }

            const aiResponse = data.candidates[0].content.parts[0].text;

            appendMessage(aiResponse, 'ai-msg');

        } catch (error) {

            console.error("Error:", error);

            appendMessage("نعتذر، واجهت مشكلة في الاتصال بالسيرفر. تأكد من تفعيل الـ API الخاص بك.", 'ai-msg');

        } finally {

            typingIndicator.style.display = 'none';

            sendBtn.disabled = false;

            chatMessages.scrollTop = chatMessages.scrollHeight;

        }

    }

    function appendMessage(text, className) {

        const msgDiv = document.createElement('div');

        msgDiv.className = `msg ${className}`;

        msgDiv.innerText = text;

        chatMessages.appendChild(msgDiv);

        chatMessages.scrollTop = chatMessages.scrollHeight;

    }

    // أحداث الضغط

    sendBtn.addEventListener('click', handleChat);

    userInput.addEventListener('keypress', (e) => {

        if (e.key === 'Enter') handleChat();

    });

</script>

</body>

</html>
    
  </body>
  
</html>
